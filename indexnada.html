<!DOCTYPE html>
<html lang="fr">

    <head>
        <title>Panier</title>
        <!-- Les balises meta necessaires dans "starter template" -->
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <!-- CSS link Fontawesome -->
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.1/css/all.css"
            integrity="sha384-vp86vTRFVJgpjF9jiIGPEEqYqlDwgyBgEF109VFjmqGmIY/Y4HV4d3Gp2irVfcrp" crossorigin="anonymous">
        <!-- Bootstrap css version 4.5.3 ici, pour que mes modification de mon css écrase le script dans "CSS"-->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
            integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous" />
        <style type="text/css" href="style.css"></style>
    </head>

    <body>
        <!-- Début !!!! mettre produit ici test de la liste produit -->
        <section class="float-left">
            <article class="col-sm-12 col-md-20 col-md-offset-1">
                <legend>Produit </legend>
                <label class="col-lg-3">Identifiant</label><input type="number" id="id" style="width:120px"
                    class="input-sm form-control"></input>
                <label class="col-lg-3">Quantité</label><input type="number" id="qte" style="width:120px"
                    class="input-sm form-control"></input>
                <label class="col-lg-3">Prix</label><input type="number" id="prix" style="width:120px"
                    class="input-sm form-control"></input>
                <button class="btn btn-primary btn-sm" onclick="ajouter()"><span><i
                            class="fas fa-shopping-cart"></i></span> Ajouter au panier</button>
            </article>
        </section>
        <br>
        <br>
        <!-- FIN !!!! mettre produit ici -->

        
        <!-- Tableau panier Only Bootstrap--> 
        <div class="container">
            <div class="float-sm-right text-center">
                <br>
                <div class="card" style="width: 16rem;"> 
                    <div class="card-body">
                        <h5 class="card-title  font-weight-bold">Mon panier</h5>
                        <div class=>
                            <div class=>
                                <div class="col-md-0 col-md-offset-1">
                                    <table id="tableau" class="table">
                                        <thead>
                                            <tr>
                                                <th scope="col" class="text-left small"></th>
                                                <th scope="col" class="text-left small"></th>
                                                <th scope="col" class="text-left small"></th>
                                                <th scope="col" class="text-left small"></th>
                                                <th></th>
                                            </tr>
                                        </thead>
                                    </table>
                                    <tbody>
                                        <tr>
                                            <td><br><label id="cart" class="font-weight-bold small float-left">Prix du panier total :</label>  <label
                                                    id="prixTotal" class="text-danger font-weight-bold small float-right"> 0.00 €</label>
                                                    <label id="nbreLignes" hidden></label></td>
                                        </tr>
                                    </tbody>
                                </div>
                            </div>
                        </div>
                        <br>
                        <!-- Bouton collapse code promo et paiement sécurisé -->
                        <div class="">
                            <tr>
                                <td>
                                    <p><a class="btn btn-outline-info btn-sm float-left" data-toggle="collapse" href="#collapseExample"
                                            role="button" aria-expanded="false" aria-controls="collapseExample">
                                            Code promo</a></p>
                                            <br>
                                            <br>
                                    <div class="collapse" id="collapseExample">
                                        <form class="form-inline">
                                            <div class="col-xs-1">
                                                <div class="input-group">
                                                    <input type="text" class="form-control btn-sm small" placeholder="Entrez votre code">
                                                    <div class="input-group-append">
                                                      <button type="submit" class="btn btn-outline-info btn-sm">Appliquer</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </form> 
                                    </div>
                                </td>
                            </tr>

                            <tr>
                            </tr>
                            <!-- Paiement sécurisé -->
                            <tr>
                                <td>
                                    <span class="text-sm-left small">Paiement sécurisé</span>
                                    <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-lock" fill="currentColor"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <path fill-rule="evenodd"
                                            d="M11.5 8h-7a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h7a1 1 0 0 0 1-1V9a1 1 0 0 0-1-1zm-7-1a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h7a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-7zm0-3a3.5 3.5 0 1 1 7 0v3h-1V4a2.5 2.5 0 0 0-5 0v3h-1V4z">
                                        </path>
                                    </svg>

                                    <img src="https://mdbootstrap.com/wp-content/plugins/woocommerce-gateway-stripe/assets/images/visa.svg"
                                        style="max-width:8%" ; alt="..." class="img-fluid">
                                    <img src="https://www.sephora.fr/on/demandware.static/-/Library-Sites-SephoraV2/default/dw1375da7d/cart/gb.svg"
                                        style="max-width:8%" ; alt="..." class="img-fluid pay">
                                    <img src="https://mdbootstrap.com/wp-content/plugins/woocommerce-gateway-stripe/assets/images/mastercard.svg"
                                        style="max-width:8%" ; alt="..." class="img-fluid pay">
                                    <img src="https://mdbcdn.b-cdn.net/wp-content/plugins/woocommerce-gateway-stripe/assets/images/amex.svg"
                                        style="max-width:8%" ; alt="..." class="img-fluid pay">
                                </td>
                            </tr>
                            <img src="https://d2homsd77vx6d2.cloudfront.net/cache/5/f/5fdcd40e4c194047c5a590ca2cc78aaa.png" class="img-fluid float-right" alt="Responsive image" style="max-width:40%" href="#">
                            <br>
                            <br>
                            <br>
                            <br>
                            <a class="btn btn-outline-primary btn-sm float-center" href="index_2.html" role="button" type="submit" >Procéder au paiement</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Javascript panier bon courage-->
        <script src="fonction.js"></script>

        <!-- Scripts bootstrap (jquery, popper et bootstrap) version 4.5.3 dans "separate" -->
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
            integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous">
        </script>
        
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
            integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous">
            </script>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js"
            integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s" crossorigin="anonymous">
            </script>

        <script>
            // Ajout et suppression
            function ajouter()
            {
                var code = parseFloat(document.getElementById("id").value);
                var qte = parseFloat(document.getElementById("qte").value);
                var prix = parseFloat(document.getElementById("prix").value);
                var monPanier = new Panier();
                monPanier.ajouterArticle(code, qte, prix);
                var tableau = document.getElementById("tableau");
                var longueurTab = parseInt(document.getElementById("nbreLignes").innerHTML);
                if (longueurTab > 0)
                {
                    for(var i = longueurTab ; i > 0  ; i--)
                    {
                        monPanier.ajouterArticle(parseFloat(tableau.rows[i].cells[0].innerHTML), parseFloat(tableau.rows[i].cells[1].innerHTML), parseFloat(tableau.rows[i].cells[2].innerHTML));
                        tableau.deleteRow(i);
                    }
                }
                var longueur = monPanier.liste.length;
                for(var i = 0 ; i < longueur ; i++)
                {
                    var ligne = monPanier.liste[i];
                    var ligneTableau = tableau.insertRow(-1);
                    var colonne1 = ligneTableau.insertCell(0);
                    colonne1.innerHTML += ligne.getCode();
                    var colonne2 = ligneTableau.insertCell(1);
                    colonne2.innerHTML += ligne.qteArticle;
                    var colonne3 = ligneTableau.insertCell(2);
                    colonne3.innerHTML += ligne.prixArticle;
                    var colonne4 = ligneTableau.insertCell(3);
                    colonne4.innerHTML = ligne.getPrixLigne() + "€"; //ici ma devise !!!!! ;
                    var colonne5 = ligneTableau.insertCell(4);
                    colonne5.innerHTML += "<button class=\"btn btn-danger btn-sm\" type=\"submit\" onclick=\"supprimer(this.parentNode.parentNode.cells[0].innerHTML)\"><span><i class=\"far fa-trash-alt\"></i></span> </button>";
                }
                document.getElementById("prixTotal").innerHTML = monPanier.getPrixPanier();
                document.getElementById("nbreLignes").innerHTML = longueur;
            }

            function supprimer(code)
            {
                var monPanier = new Panier();
                var tableau = document.getElementById("tableau");
                var longueurTab = parseFloat(document.getElementById("nbreLignes").innerHTML);
                if (longueurTab > 0)
                {
                    for(var i = longueurTab ; i > 0  ; i--)
                    {
                        monPanier.ajouterArticle(parseFloat(tableau.rows[i].cells[0].innerHTML), parseFloat(tableau.rows[i].cells[1].innerHTML), parseFloat(tableau.rows[i].cells[2].innerHTML));
                        tableau.deleteRow(i);
                    }
                }
                monPanier.supprimerArticle(code);
                var longueur = monPanier.liste.length;
                for(var i = 0 ; i < longueur ; i++)
                {
                    var ligne = monPanier.liste[i];
                    var ligneTableau = tableau.insertRow(-1);
                    var colonne1 = ligneTableau.insertCell(0);
                    colonne1.innerHTML += ligne.getCode();
                    var colonne2 = ligneTableau.insertCell(1);
                    colonne2.innerHTML += ligne.qteArticle;
                    var colonne3 = ligneTableau.insertCell(2);
                    colonne3.innerHTML += ligne.prixArticle;
                    var colonne4 = ligneTableau.insertCell(3);
                    colonne4.innerHTML += ligne.getPrixLigne();
                    var colonne5 = ligneTableau.insertCell(4);
                    colonne5.innerHTML += "<button class=\"btn btn-danger btn-sm\" type=\"submit\" onclick=\"supprimer(this.parentNode.parentNode.cells[0].innerHTML)\"><span><i class=\"far fa-trash-alt\"></i></span> </button>";
                }
                document.getElementById("prixTotal").innerHTML = monPanier.getPrixPanier();
                document.getElementById("nbreLignes").innerHTML = longueur;
            }
        </script>
    </body>

</html>